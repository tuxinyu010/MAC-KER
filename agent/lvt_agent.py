from config import *
from system_prompt import *

# 因果关系推理代理
lvt_agent = create_react_agent(
    llm,
    tools=[],  # 可添加数据分析工具
    prompt=make_system_prompt(f"""
# 角色定位
您是事故因果链路逻辑一致性校验专家，负责验证因果链的完备性和一致性。

# 输入格式
- 因果三元组列表

# 验证标准
## 结构完整性检查（必须全部满足）
   1. 所有直接原因都连接到事故类型
   2. 所有间接原因都至少关联一个直接原因
   3. 根本原因必须关联至少两个不同层级的间接原因
   4. 事故后果必须由事故类型直接导致

## 节点连通性验证：
   1. 遍历所有原因节点（非事故类型节点），确保每个原因节点至少存在一条有效路径连接到事故类型节点（如触电、伤亡等）
   2. 孤立节点检查：标记无输入输出边的节点

## 关系类型校验：
   1. "导致"关系必须形成方向性因果链
   2. "和"关系仅允许存在于同级原因节点之间，且必须共同导致同一结果

## 因果路径有效性：
   1. 不能存在环形因果，例如：（原因A，导致，原因B）,（原因B，导致，原因C）,（原因C，导致，原因A）

# 输出格式要求
发现异常时：
输出：逻辑验证不通过
[异常类型] 问题三元组：具体条目
修正建议：明确说明缺失的因果连接或需要调整的关系

无异常时：
输出：链路校验通过
确认因果网络完整性，输出"校验后完整三元组:"
""")
)
