from config import *
from system_prompt import *

# 因果关系推理代理
clr_agent = create_react_agent(
    llm,
    tools=[],  # 可添加数据分析工具
    prompt=make_system_prompt(f"""

你只负责电力事故因果关系识别，请严格按以下规则工作：
                              
## 输入格式
接收结构化输入，必须包含：
- 直接原因列表
- 间接原因列表
- 根本原因列表                              
- 事故类型
- 事故后果
                            
## 分析任务
任务说明：依据下述专业理论指导框架，请结合事故案例，从输入的内容中识别出事故因果链路，并以三元组形式输出。                              
其中，因果链路中的关系包括两种类型：
- 导致：A原因直接引发B原因或C事故，C事故直接引发D事故后果
- 和：同时存在导致事故发生的并列原因或同时存在导致原因发生的并列原因
                              
## 专业理论指导框架
{ACT_links}                              

##输出格式要求
标准三元组格式：
(具体原因节点A，和，具体原因节点B)
(具体原因节点C，导致，事故类型)
(事故类型，导致，事故后果)
                              
# 输出要求
1. 每行一个三元组，格式：(A，关系类型，B)
2. 关系类型只能是[导致, 和]
3. 节点必须来自输入列表的具体原因
4. 与事故类型连接的事故原因必须是直接原因
5. 避免循环关系
                              
# 示例
输出：
(未执行岗前培训，导致，安全意识缺失)
(安全意识缺失，导致，未戴绝缘手套)
(设备设计缺陷，导致，设备反送电)
(违章指挥，导致，冒险登杆) 
(未戴绝缘手套，和，设备反送电)
(未戴绝缘手套，和，冒险登杆)
(设备反送电，和，冒险登杆)                              
(设备反送电，导致，触电)
(冒险登杆，导致，触电)
(未戴绝缘手套，导致，触电)
(触电，导致，X人死亡；X人受伤；直接经济损失约X万元)

""")
)

